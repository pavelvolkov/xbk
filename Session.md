# Сессии #

Механизм сессий представлен в системе классом "xbkSession" и по большому счёту является частным случаем кеша, где в качестве хранимой информации выступает массив, а время хранения постоянно пролонгируется.
Пример использования:
```
if (isset($this->_COOKIE['my_session_id'])) {
    // Получаем идентификатор сессии из куки
    $session_id = $this->_COOKIE['my_session_id'];
    // Создаём класс сессии, сообщаем идентификатор
    $Session = $this->session($session_id);
    // Определяем наличие сессионных переменных, сохранённых ранее под этим идентификатором
    if (!$Session->exists()) {
        // Такой сессии раньше не было - генерируем новую сессию
        $Session->reset();
    }
    // Получаем идентификатор сессии
    $session_id = $Session->getId();
    // Записываем идентификатор в куки
    $this->setCookie('my_session_id', $session_id);
} else {
    // Сессионный идентификатор не был сообщён 
    // Создаём новую сессию
    $Session = $this->session();
    // Получаем идентификатор
    $session_id = $Session->getId();
    // Записываем идентификатор в куки
    $this->setCookie('my_session_id', $session_id);
}
```
Таков оптимальный способ создания объекта сессии. В момент инстанцирования можно сообщить объекту дополнительные аргументы:
```
// Опции сессии
$options = Array(
'lifetime' => 3600,
);
// Массив сессионых переменных по-умолчанию
$default_vars = Array(
'var1' => 'value1',
'var2' => 'value2',
);
// Создаём новую сессию
$Session = $this->session(null, $options, $default_vars);
// Получаем сгенерированный сессионный идентификатор
$session_id = $Session->getId();
```
В опциях можно установить параметр "lifetime", определяющий время жизни сессии в секундах. По-умолчанию этот параметр равен 3600 (1 час). Сессионые переменные по-умолчанию задают структуру массива сессионных переменных и в дальнейшем перекрываются переменными из кеша - так бывает зачастую удобно, чтобы не контролировать наличие той или иной переменной в массиве.

Работа с сессиоными переменными очень проста. Загрузка осуществляется методом "load()":
```
$session_vars = $Session->load();
```
Запись - метод "save()":
```
$Session->save($session_vars);
```
Сброс - метод "clear()":
```
$Session->clear();
```