=Правила шаблонизации=

Шаблонизатор, используемый в системе является производной и расширенной версией шаблонизатора patTemplate: http://trac.php-tools.net/patTemplate/wiki/Docs

Пример задания шаблона для страницы 404. Непосредственный шаблон 404.tpl:
{{{
<xbk:tmpl name="body"><xbk:css name="404" /><table border="0" cellspacing="0" cellpadding="0" width="100%" height="100%">
<tr>
<td align="center" valign="center">

<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td class="err404-404">
404
</td>
</tr>
<tr>
<td class="err404-text">
{LANG_ERROR404_TEXT}
</td>
</tr>
</table>

</td>
</tr>
</table></xbk:tmpl>
}}}

Несущий макет page.tpl:
{{{
<xbk:tmpl name="page"><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="{LANG}" lang="{LANG}">
<head>
<meta http-equiv="Content-Type" content="text/html; charset={CHARSET}" />
{META}
<title>{TITLE|htmlspecialchars}</title>
{CSS}
{JS}
</head>
<body>
{CONTENT}
</body>
</html></xbk:tmpl>
}}}

Сборка внутри класса секции:
{{{
class xbk404Error extends xbkSection
{

    /**
     * Конструктор класса
     *
     * @access      public
     */
    public function __construct2()
    {
    	// Заголовок
    	$this->setTitle($this->_LANG['error404']);

        // Содержимое
        $tmpl = $this->template();
        $tmpl->readTemplatesFromInput('404');
        $this->setContent($tmpl->getParsedTemplate('body'));
    }

}
}}}

Результат:
{{{
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Ошибка 404</title>

<link href="/xbk/0.1/system_modules/page/skin/css/page.css" rel="stylesheet" type="text/css" />
<link href="/xbk/0.1/system_modules/core/skin/css/404.css" rel="stylesheet" type="text/css" />

</head>
<body>
<table border="0" cellspacing="0" cellpadding="0" width="100%" height="100%">
<tr>
<td align="center" valign="center">

<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td class="err404-404">
404
</td>
</tr>
<tr>
<td class="err404-text">
Запрашиваемая страница не найдена
</td>
</tr>
</table>

</td>
</tr>
</table>
</body>
</html>
}}}

Шаблонизатор интегрирован в системе таким образом, что расширять набор его функций возможно прямо посредством указания через интеграционный файл module.xml. Дополнительные расширения шаблонизатора могут являться контекстными объектами, что очень удобно. Функция "css" в вышеизложенном примере является как раз случаем такого расширения.

Языковые переменные автоматически наследуются из настроек языкового интерфейса модуля и доступны в теле шаблона в качестве переменных с префиксом LANG_.